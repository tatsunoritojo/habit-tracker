# 画面遷移・ワイヤーフレーム設計書

## 基本情報

| 項目 | 内容 |
|------|------|
| ドキュメント種別 | 画面設計書 |
| バージョン | 0.1 |
| 作成日 | 2025年11月26日 |
| 作成者 | プロジェクトマネージャー |

---

## 1. 画面一覧

| 画面ID | 画面名 | 概要 |
|--------|--------|------|
| S01 | スプラッシュ | 起動画面 |
| S02 | オンボーディング | 初回起動時の説明（3画面） |
| S03 | ホーム | カード一覧、今日の記録状況 |
| S04 | カード追加 | テンプレートからカードを選択 |
| S05 | カード詳細 | カレンダー表示、統計 |
| S06 | エール提案 | 他ユーザーの記録を見てリアクション |
| S07 | 通知一覧 | 受け取ったエール一覧 |
| S08 | 設定 | エール頻度、通知設定 |

---

## 2. 画面遷移図

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  [S01 スプラッシュ]                                          │
│         │                                                   │
│         ▼                                                   │
│  ┌──────────────┐                                           │
│  │ 初回起動？    │                                           │
│  └──────┬───────┘                                           │
│     Yes │    No                                             │
│         ▼     │                                             │
│  [S02 オンボーディング]                                      │
│         │     │                                             │
│         ▼     │                                             │
│  [S04 カード追加]◄──────────────────────┐                   │
│         │                              │                   │
│         ▼                              │                   │
│  ┌─────────────────────────────────────┴─┐                 │
│  │              [S03 ホーム]              │◄────┐          │
│  │  ┌─────────────────────────────────┐  │     │          │
│  │  │ [カード1] 💪⭐🤝               │  │     │          │
│  │  │ [カード2] 💪                   │  │     │          │
│  │  │ [+ カード追加]                  │  │     │          │
│  │  └─────────────────────────────────┘  │     │          │
│  │                                       │     │          │
│  │  [ナビゲーションバー]                   │     │          │
│  │  🏠ホーム  💬エール  🔔通知  ⚙設定     │     │          │
│  └───┬────────┬────────┬────────┬───────┘     │          │
│      │        │        │        │             │          │
│      │        ▼        ▼        ▼             │          │
│      │   [S06]    [S07]    [S08]              │          │
│      │   エール    通知     設定               │          │
│      │   提案     一覧                        │          │
│      │        │        │        │             │          │
│      │        └────────┴────────┴─────────────┘          │
│      │                                                    │
│      ▼                                                    │
│  [S05 カード詳細]─────────────────────────────────────────┘
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 各画面ワイヤーフレーム

### S01 スプラッシュ

```
┌────────────────────────────┐
│                            │
│                            │
│                            │
│                            │
│         [アプリロゴ]         │
│                            │
│         アプリ名            │
│                            │
│                            │
│                            │
│         [ローディング]       │
│                            │
└────────────────────────────┘
```

**仕様**
- 表示時間: 1〜2秒
- 裏で Firebase Anonymous Auth 実行
- 初回/2回目以降を判定して遷移先を決定

---

### S02 オンボーディング（3画面）

#### S02-1: コンセプト説明1

```
┌────────────────────────────┐
│                            │
│      [イラスト: 1タップ]     │
│                            │
│                            │
│    「1タップで記録」         │
│                            │
│    毎日の習慣を              │
│    タップひとつで記録。       │
│    それだけ。                │
│                            │
│                            │
│         ● ○ ○              │
│                            │
│      [次へ →]               │
│                            │
└────────────────────────────┘
```

#### S02-2: コンセプト説明2

```
┌────────────────────────────┐
│                            │
│      [イラスト: エール]      │
│                            │
│                            │
│    「テキストなしのエール」   │
│                            │
│    💪⭐🤝                  │
│    文字を打たなくても        │
│    気持ちは伝わる。          │
│                            │
│                            │
│         ○ ● ○              │
│                            │
│      [次へ →]               │
│                            │
└────────────────────────────┘
```

#### S02-3: コンセプト説明3

```
┌────────────────────────────┐
│                            │
│      [イラスト: 仲間]        │
│                            │
│                            │
│  「繋がりすぎない繋がり」     │
│                            │
│    同じ習慣を続ける仲間と     │
│    ゆるく、軽く、繋がる。     │
│                            │
│                            │
│         ○ ○ ●              │
│                            │
│      [始める]               │
│                            │
└────────────────────────────┘
```

**仕様**
- スワイプまたはボタンで進む
- 「始める」タップで S04 カード追加へ

---

### S03 ホーム

```
┌────────────────────────────┐
│ ≡                     🔔(2) │  ← ハンバーガー / 通知バッジ
├────────────────────────────┤
│                            │
│  今週 4日 / 今月 12日        │  ← メイン統計（累積表示）
│                            │
├────────────────────────────┤
│                            │
│  ┌────────────────────┐    │
│  │ 💪 毎朝ストレッチ     │    │  ← カード1
│  │                    │    │
│  │ 今日: ✔  連続: 7日   │    │
│  │ 💪💪⭐ (+1)         │    │  ← 受け取ったエール
│  └────────────────────┘    │
│                            │
│  ┌────────────────────┐    │
│  │ 📚 英語学習         │    │  ← カード2
│  │                    │    │
│  │ 今日: □  連続: 3日   │    │  ← 未記録
│  │ 🤝                  │    │
│  └────────────────────┘    │
│                            │
│  ┌────────────────────┐    │
│  │     ＋ カードを追加    │    │  ← カード追加ボタン
│  └────────────────────┘    │
│                            │
├────────────────────────────┤
│ 🏠     💬     🔔     ⚙    │  ← ナビゲーションバー
│ホーム  エール  通知   設定   │
└────────────────────────────┘
```

**仕様**

| 要素 | 動作 |
|------|------|
| カードタップ（未記録） | 記録確認ダイアログ → 記録完了 |
| カードタップ（記録済） | S05 カード詳細へ |
| カード長押し | S05 カード詳細へ |
| ＋カードを追加 | S04 カード追加へ |
| エールアイコンタップ | S07 通知一覧（該当カードでフィルタ） |
| ナビゲーション | 各画面へ遷移 |

#### 記録確認ダイアログ

```
┌────────────────────────────┐
│                            │
│    「毎朝ストレッチ」        │
│    今日の記録をつけますか？   │
│                            │
│  [キャンセル]    [記録する]  │
│                            │
└────────────────────────────┘
```

※設定で「確認なしで記録」をONにした場合は省略

#### 記録完了トースト

```
┌────────────────────────────┐
│  ✔ 記録しました！ 8日連続！   │
└────────────────────────────┘
```

#### おかえり演出（3日以上空いた場合）

```
┌────────────────────────────┐
│                            │
│    🎉 おかえり！            │
│    5日ぶりに再開！          │
│    ここからまた一緒に        │
│    やっていこう。           │
│                            │
│         [OK]               │
│                            │
└────────────────────────────┘
```

---

### S04 カード追加

```
┌────────────────────────────┐
│ ←                カード追加 │
├────────────────────────────┤
│                            │
│  まずは1つだけ、             │
│  小さく始めましょう。        │
│                            │
├────────────────────────────┤
│  🔍 カテゴリを検索...        │
├────────────────────────────┤
│                            │
│  [1分で終わる習慣] ← タグ    │
│                            │
│  ▼ 健康                    │
│    ▼ 運動                  │
│      ・毎日スクワット1回     │
│      ・毎朝ストレッチ        │
│      ・ウォーキング10分      │
│    ▼ 食事                  │
│      ・水を1杯飲む          │
│    ▼ 睡眠                  │
│      ・23時に寝る準備        │
│                            │
│  ▼ 学習                    │
│    ▼ 語学                  │
│      ・英語アプリを開く      │
│      ・単語帳を1ページ       │
│    ▼ 読書                  │
│      ・本を1ページ読む       │
│                            │
│  ▼ 生活習慣                 │
│  ▼ 創作                    │
│  ▼ マインドフルネス          │
│                            │
└────────────────────────────┘
```

**仕様**

| 要素 | 動作 |
|------|------|
| テンプレートタップ | カード作成確認へ |
| カテゴリタップ | 展開/折りたたみ |
| 「1分で終わる習慣」タグ | フィルタリング |

#### カード作成確認

```
┌────────────────────────────┐
│                            │
│    「毎朝ストレッチ」        │
│    を始めますか？           │
│                            │
│    カテゴリ: 健康 > 運動     │
│                            │
│    ┌──────────────────┐    │
│    │ ☑ 公開する          │    │  ← デフォルトON
│    │  （同じ習慣の仲間と    │    │
│    │   エールを送り合える） │    │
│    └──────────────────┘    │
│                            │
│  [キャンセル]    [始める]   │
│                            │
└────────────────────────────┘
```

---

### S05 カード詳細

```
┌────────────────────────────┐
│ ←              毎朝ストレッチ │
├────────────────────────────┤
│                            │
│  ┌────────────────────┐    │
│  │   今月 15日 達成      │    │  ← メイン統計
│  │   先月より +3日       │    │
│  └────────────────────┘    │
│                            │
│  ┌────────────────────┐    │
│  │  連続: 8日           │    │  ← サブ統計
│  │  最長: 12日  エール: 24 │    │
│  └────────────────────┘    │
│                            │
├────────────────────────────┤
│  2025年11月                 │
│  日 月 火 水 木 金 土        │
│  ── ── ── ── ── ○ ○        │  ← ○=達成、──=未達成（薄グレー）
│  ○ ○ ── ○ ○ ○ ○           │
│  ○ ○ ○ ○ ○ ○ ○            │
│  ○ ○ ○ ●                  │  ← ●=今日
│                            │
├────────────────────────────┤
│                            │
│  獲得バッジ                 │
│  🏅はじめの一歩  🏅1週間     │
│                            │
├────────────────────────────┤
│                            │
│  [カードを編集]  [削除]      │
│                            │
└────────────────────────────┘
```

**仕様**

| 要素 | 動作 |
|------|------|
| カレンダー日付タップ | その日の詳細（エール受信など）を表示 |
| 達成日 | アクセントカラーで表示 |
| 未達成日 | 薄グレー or 無色（主張しない） |
| 「カードを編集」 | 公開/非公開、リマインダー時刻変更 |
| 「削除」 | 削除確認ダイアログ |

---

### S06 エール提案

```
┌────────────────────────────┐
│ ←                エールを送る │
├────────────────────────────┤
│                            │
│  同じ習慣をがんばる仲間に     │
│  エールを送りませんか？       │
│                            │
├────────────────────────────┤
│                            │
│  ┌────────────────────┐    │
│  │ 筋トレ の仲間         │    │
│  │ 連続 12日 / 今週 5回   │    │
│  │                    │    │
│  │ 💪継続  ⭐すごい  🤝一緒 │    │  ← 3ボタン横並び
│  └────────────────────┘    │
│                            │
│  ┌────────────────────┐    │
│  │ 英語学習 の仲間        │    │
│  │ 連続 3日 / 今週 3回    │    │
│  │                    │    │
│  │ 💪継続  ⭐すごい  🤝一緒 │    │
│  └────────────────────┘    │
│                            │
│  ┌────────────────────┐    │
│  │ 読書 の仲間（再開！）   │    │  ← 再開ユーザーにはラベル
│  │ 4日ぶりに再開          │    │
│  │                    │    │
│  │ 💪継続  ⭐すごい  🤝一緒 │    │
│  └────────────────────┘    │
│                            │
│                            │
│  [今日はスキップ]            │
│                            │
├────────────────────────────┤
│ 🏠     💬     🔔     ⚙    │
└────────────────────────────┘
```

**仕様**

| 要素 | 動作 |
|------|------|
| リアクションボタンタップ | 即送信 + アニメーション + アンドゥ表示 |
| 送信済み | ボタンがグレーアウト、「送信済み ✔」表示 |
| 「今日はスキップ」 | ホームへ戻る |

#### アンドゥスナックバー

```
┌────────────────────────────┐
│ 💪 ナイス継続 を送信しました [取り消す] │
└────────────────────────────┘
```

- 2〜3秒で自動消去
- 「取り消す」タップで送信キャンセル

---

### S07 通知一覧

```
┌────────────────────────────┐
│ ←                    通知   │
├────────────────────────────┤
│  [エール]  [リマインダー]     │  ← タブ切り替え
├────────────────────────────┤
│                            │
│  今日                      │
│  ─────────────────────     │
│  💪 ナイス継続              │
│  「毎朝ストレッチ」にエール    │
│  7日連続達成中              │
│  10:23                     │
│                            │
│  ⭐ すごい！                │
│  「英語学習」に仲間から       │
│  3日連続おめでとう           │
│  07:15                     │
│                            │
│  昨日                      │
│  ─────────────────────     │
│  🤝 一緒にがんばろ           │
│  「読書」にエールが届きました  │
│  22:10                     │
│                            │
│  💪 ナイス継続              │
│  「毎朝ストレッチ」にエール    │
│  08:30                     │
│                            │
├────────────────────────────┤
│ 🏠     💬     🔔     ⚙    │
└────────────────────────────┘
```

**仕様**

| 要素 | 動作 |
|------|------|
| 通知アイテムタップ | S05 該当カード詳細へ |
| 未読通知 | 背景色でハイライト |
| 既読化 | 画面表示時に自動で既読処理 |

---

### S08 設定

```
┌────────────────────────────┐
│ ←                    設定   │
├────────────────────────────┤
│                            │
│  エール設定                 │
│  ─────────────────────     │
│  エール頻度                 │
│  [medium ▼]                │  ← high/medium/low/off
│                            │
│  通知設定                   │
│  ─────────────────────     │
│  プッシュ通知               │
│  [ON ○]                    │  ← トグル
│                            │
│  リマインダー時刻            │
│  [07:00 ▼]                 │
│                            │
│  記録時の確認ダイアログ       │
│  [OFF ○]                   │  ← トグル
│                            │
│  アカウント                 │
│  ─────────────────────     │
│  データのエクスポート         │
│  [>]                       │
│                            │
│  アカウント削除              │
│  [>]                       │  ← 確認ダイアログ後に削除
│                            │
│  アプリ情報                 │
│  ─────────────────────     │
│  プライバシーポリシー         │
│  [>]                       │
│                            │
│  利用規約                   │
│  [>]                       │
│                            │
│  バージョン: 1.0.0          │
│                            │
├────────────────────────────┤
│ 🏠     💬     🔔     ⚙    │
└────────────────────────────┘
```

**エール頻度の説明**

| 設定値 | 説明 |
|--------|------|
| high | エール提案: 多め、受信通知: 制限なし |
| medium | エール提案: 1日1〜2回、受信通知: 1日2〜3件 |
| low | エール提案: 数日に1回、受信通知: 1日1件 |
| off | エール機能を無効化 |

---

## 4. 共通UIコンポーネント

### 4.1 ナビゲーションバー

```
┌────────────────────────────┐
│ 🏠     💬     🔔     ⚙    │
│ホーム  エール  通知   設定   │
└────────────────────────────┘
```

- 常時表示（スプラッシュ、オンボーディング除く）
- 選択中のアイコンはアクセントカラー
- 通知バッジ: 未読エール数を表示

### 4.2 カードコンポーネント

```
┌────────────────────────────┐
│ [アイコン] カードタイトル     │
│                            │
│ 今日: ✔/□  連続: N日        │
│ 💪💪⭐ (+N)                 │  ← エール表示
└────────────────────────────┘
```

### 4.3 スナックバー（アンドゥ）

```
┌────────────────────────────┐
│ [アイコン] メッセージ  [取り消す] │
└────────────────────────────┘
```

- 画面下部に表示
- 2〜3秒で自動消去
- 「取り消す」でアクション取り消し

### 4.4 トースト

```
┌────────────────────────────┐
│  ✔ メッセージ                │
└────────────────────────────┘
```

- 画面中央 or 下部に表示
- 1〜2秒で自動消去
- インタラクションなし

---

## 5. アニメーション・演出

### 5.1 記録完了時

- カードが軽くバウンス
- チェックマークがフェードイン
- 連続日数がカウントアップ

### 5.2 リアクション送信時

| type | アニメーション |
|------|---------------|
| cheer (💪) | カードが軽くバウンド |
| amazing (⭐) | 星が弾けるエフェクト |
| support (🤝) | カード同士が近づくモーション |

### 5.3 エール受信時（通知一覧）

- 新規エールはスライドインで表示
- リアクションアイコンが軽くバウンス

### 5.4 おかえり演出

- 紙吹雪 or 軽い祝福エフェクト
- メッセージがフェードイン

---

## 6. 画面遷移まとめ

| 遷移元 | アクション | 遷移先 |
|--------|------------|--------|
| S01 | 起動完了（初回） | S02 |
| S01 | 起動完了（2回目以降） | S03 |
| S02 | 「始める」タップ | S04 |
| S03 | カードタップ（未記録） | 記録ダイアログ |
| S03 | カードタップ（記録済） | S05 |
| S03 | 「+ カードを追加」 | S04 |
| S03 | ナビ「エール」 | S06 |
| S03 | ナビ「通知」 | S07 |
| S03 | ナビ「設定」 | S08 |
| S04 | テンプレート選択→「始める」 | S03 |
| S05 | 「←」戻る | S03 |
| S06 | リアクション送信完了 | S06（そのまま） |
| S06 | 「今日はスキップ」 | S03 |
| S07 | 通知アイテムタップ | S05 |
| S08 | 各設定項目 | 設定変更 or 詳細画面 |

---

## 改訂履歴

| バージョン | 日付 | 変更内容 |
|------------|------|----------|
| 0.1 | 2025-11-26 | 初版作成 |
